# 金蝶 WebAPI 调用示例

本仓库旨在为开发者提供金蝶 WebAPI 的常见操作示例，包括登录、采购订单查询、单据删除、批量操作和数据库更新等功能。适合参考、学习和二次开发。

## 主要文件

- `登录.py`：金蝶 WebAPI 登录接口示例
- `查询采购订单.py`：采购订单查询接口示例
- `删除.py`：单据删除操作示例
- `批量删除单据.py`：批量删除单据操作示例
- `可视化界面.py`：操作界面可视化实现示例
- `更新数据库`：数据库更新相关操作脚本

## 使用说明

1. 安装依赖（如需第三方库）：
   ```
   pip install -r requirements.txt
   ```
2. 配置金蝶 WebAPI 地址与账号信息，具体参数请查阅每个脚本文件顶部注释。
3. 运行示例脚本，体验各类接口调用方式：
   ```
   python 登录.py
   python 查询采购订单.py
   # 其他脚本同理
   ```

## 修改与保存说明

金蝶 webapi 没有专门的“修改”接口，修改数据是通过保存接口实现的。**调用保存接口时如果传了单据内码表示是修改单据，不传内码或者内码传 0 表示新增单据。**

- 修改数据需要传递单据内码，传单据编码不可以。
- 修改分录需要传入分录内码，不需要修改的分录，需要传入 `IsDeleteEntry` 为 `false`，防止被删除。
  - 修改分录时要特别注意，`IsDeleteEntry` 默认是 `true`，所以如果不是要以新的数据包里面的分录替换掉旧的，一定要携带 `IsDeleteEntry` 并设置为 `false`，不然系统会将原有分录删除。
- 只需要传入修改字段的数据包，格式与保存新增格式一样。如果传入的数据包中包含了不需要修改的字段，可以通过 `NeedUpDateFields` 参数限定需要修改的字段。
  - 设置参数 `NeedUpDateFields`，限定需要修改的字段；如果是分录字段，还需要把分录的 Key 也放到里面。
- 可以设置参数 `NeedReturnFields`，返回更新后的结果。返回的结果是一个数组，里面包含了所有的字段。

## 适用场景

- 金蝶系统二次开发
- 测试和调试 WebAPI 接口
- 自动化或批量数据处理
- 学习金蝶 API 调用流程

## 贡献方式

欢迎提交 Pull Request 或 Issue 反馈问题、分享更多示例。请保持代码简洁注释充分。

## License

MIT License

---

如需更详细的技术说明或遇到问题，欢迎留言交流！
